<ion-navbar *navbar>
  <ion-title class="logo">K-BOP</ion-title>
  <ion-searchbar *ngIf="showSearch && myPlaylist"
    [(ngModel)]="searchQuery"
    (input)="getItems($event)"
    (cancel)="toggleSearch(false)">
  </ion-searchbar>
  <!-- <ion-buttons end *ngIf="myPlaylist">
    <button clear *ngIf="myPlaylist.length > 0 && !showSearch" (click)="confirmClear()">Clear</button>
    <button clear *ngIf="myPlaylist.length > 0 && !showSearch" (click)="launch()">Spotify</button>
    <button clear *ngIf="myPlaylist.length > 0 && !showSearch" (click)="toggleSearch(true)"><ion-icon name="search"></ion-icon></button>
  </ion-buttons> -->
</ion-navbar>

<div *ngIf="!myPlaylist" class="spinner">
  <div class="rect1"></div>
  <div class="rect2"></div>
  <div class="rect3"></div>
  <div class="rect4"></div>
  <div class="rect5"></div>
</div>

<div *ngIf="myPlaylist">
  <p *ngIf="myPlaylist.size === 0">Your playlist is empty</p>
</div>

<ion-content *ngIf="myPlaylist" class="playlist">

  <ion-list>
    <span *ngFor="#song of myPlaylist | sort">
      <ion-item-divider light *ngIf="artistDiff(song)"
        [ngClass]="{noshow: showSearch && searchQuery}">
        {{song.artist}}
      </ion-item-divider>
      <ion-item-sliding
        [ngClass]="{selected: nowPlaying(song),
          deleted: song.deleted,
          noshow: !song.searched && showSearch && searchQuery}">
        <ion-item (click)="playSong(song)">
          <ion-thumbnail item-left><img src={{song.image_large}}></ion-thumbnail>
          <h3>{{song.title}}</h3>
          <p>{{song.artist}}</p>
          <button dark clear item-right [ngSwitch]="nowPlaying(song)">
            <ion-icon *ngSwitchWhen="true" name="pause"></ion-icon>
            <ion-icon *ngSwitchDefault name="play"></ion-icon>
          </button>
        </ion-item>
        <ion-item-options>
          <button danger (click)="deleteSong(song)">
            <ion-icon name="delete"></ion-icon>
            Delete
          </button>
          <button primary (click)="showModal({mySong: song})">
            <ion-icon name="comments"></ion-icon>
            {{song.comments.length}} Comments
          </button>
        </ion-item-options>
      </ion-item-sliding>
    </span>
  </ion-list>

</ion-content>

<button fab primary fab-bottom fab-right>
  <ion-icon name='add'></ion-icon>
</button>
